<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Formulario Entrega RAMO</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    /* Spinner animado */
    .spinner-busqueda {
      display: inline-block;
      width: 18px;
      height: 18px;
      border: 2px solid #ccc;
      border-top: 2px solid #B70000;
      border-radius: 50%;
      animation: girar 0.6s linear infinite;
      vertical-align: middle;
      margin-left: 8px;
    }

    @keyframes girar {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    #estado-busqueda {
      font-size: 1.2em;
      margin-left: 10px;
      vertical-align: middle;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo-ramo.png" alt="Logo RAMO" style="max-width: 180px;" />
  </header>

  <!-- Condiciones de uso mejoradas -->
  <div class="condiciones-uso">
    <strong>Condiciones de uso:</strong><br/>
    Los elementos son de uso exclusivo de la Organización Ramo para la ejecución de sus actividades Comerciales.<br/><br/>
    El anterior equipo y los accesorios no podrán ser utilizados para otras labores distintas a las establecidas para la venta, ni manipulados por terceras personas, por lo tanto cualquier daño o pérdida, por negligencia, mal manejo, y/o descuido del funcionario, lo harán responsable del costo estipulado de dichos elementos.<br/><br/>
    En caso de presentarse alguna de las anteriores situaciones, la empresa efectuará las investigaciones a que haya lugar.<br/><br/>
    En caso de alguna novedad por uso de cualquiera de los elementos asignados, se deberá informar al Jefe inmediato para hacer el trámite de reposición y/o arreglo respectivo.<br/><br/>
    Si el funcionario se retira de la empresa, deberá entregar los elementos, en las mismas condiciones que le fueron asignados.<br/><br/>
    Por favor mantenerlo en buen estado, usarlo con estuche para evitar pérdida y daños físicos, igualmente hacer la carga con su cargador y cable original.
  </div>

  <h2>Formulario de Entrega RAMO - TC27</h2>

  <form id="formulario">
    <label>Fecha actual:</label>
    <input type="text" name="fecha" id="fecha" readonly />

    <label>Cédula:</label>
    <div class="input-con-boton">
      <input type="text" name="cedula" id="cedula" required />
      <button type="button" class="btn-secundario" onclick="buscarColaborador()">Buscar</button>
      <span id="estado-busqueda"></span>
    </div>

    <label>Nombre del colaborador:</label>
    <input type="text" name="nombres" id="nombre_colaborador" readonly />

    <label>Agencia:</label>
    <input type="text" name="agencia" id="agencia" readonly />

    <label>Teléfono del equipo:</label>
    <input type="text" name="telefono" id="telefono" readonly />

    <label>Código SAP:</label>
    <input type="text" name="codigo_sap" required />

    <label>Estado del equipo:</label>
    <select name="estado_equipo" required>
      <option value="">Seleccione...</option>
      <option value="Nuevo">Nuevo</option>
      <option value="Bueno">Bueno</option>
      <option value="Regular">Regular</option>
      <option value="Malo">Malo</option>      
    </select>

    <label>Accesorios:</label>
    <div class="accesorios-container">
      <label><input type="checkbox" name="accesorios" value="Estuche" /> Estuche</label>
      <label><input type="checkbox" name="accesorios" value="Batería" /> Batería</label>
      <label><input type="checkbox" name="accesorios" value="Cargador" /> Cargador</label>
      <label><input type="checkbox" name="accesorios" value="Cable" /> Cable</label>
    </div>

    <label>Estado batería:</label>
    <input type="text" name="estado_bateria" required />

    <label>Operación:</label>
    <select name="operacion" required>
      <option value="">Seleccione...</option>
      <option value="Gestor PV">Gestor PV</option>
      <option value="Preventa">Preventa</option>
      <option value="Canal Moderno">Canal Moderno</option>
      <option value="Logística">Logística</option>
      <option value="Eagle">Eagle</option>
    </select>

    <label>Observaciones:</label>
    <textarea name="observaciones" rows="3"></textarea>

    <label>Serial del equipo:</label>
    <input type="text" id="serial" name="serial" readonly />

    <label>Firma digital (use el dedo o mouse):</label>
    <canvas id="canvas" width="300" height="100"></canvas>
    <button type="button" class="btn-secundario" onclick="limpiarFirma()">Limpiar firma</button>

    <label style="margin-top: 15px;">
      <input type="checkbox" id="aceptaCondiciones" required />
      He leído y acepto estas condiciones.
    </label>

    <!-- Spinner de carga -->
    <div id="spinner" class="spinner" style="display:none;"></div>

    <button type="submit" class="btn-principal">Enviar</button>
    <p id="estado"></p>
  </form>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const hoy = new Date().toISOString().split("T")[0];
      document.getElementById("fecha").value = hoy;
    });
  </script>

  <script src="script.js"></script>
</body>
</html>
